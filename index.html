
<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>
<head>
<title>Job Application Form Widget Flat Responsive Widget Template :: w3layouts</title>
<!-- for-mobile-apps -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<meta name="keywords" content="Job Application Form Widget Responsive, Login form web template, Sign up Web Templates, Flat Web Templates, Login signup Responsive web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<!-- //for-mobile-apps -->
<link href='//fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/j-forms.css">
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
</head>
<body>
<div class="content">
		<h1>Join our team!</h1>
		<div class="main">
			<form class="contact-forms" id="upload-form">
				<!-- end /.header-->

					<!-- start name -->
					<div class="first-line">
						<div class="span6 main-row">
							<div class="input">
								
								<input type="text" id="first_name" name="first_name" placeholder="First name">
							</div>
						</div>
						<div class="span6 main-row">
							<div class="input">
								
								<input type="text" id="last_name" name="last_name" placeholder="Last name">
							</div>
						</div>
					</div>
					<!-- end name -->

					<!-- start email phone -->
					<div class="first-line">
						<div class="span6 main-row">
							<div class="input">
								
								<input type="email" placeholder="Email" id="email" name="email">
							</div>
						</div>
						<div class="span6 main-row">
							<div class="input">
								
								<input type="text" placeholder="Phone" id="phone" name="phone">
							</div>
						</div>
					</div>
				

					<!-- start country -->
					<div class="main-row">
						<label class="input select">
							<select name="country" id="country">
								<option value="none" selected="" disabled="">Select country</option>
								<option value="United States">United States</option>
								<option value="Portugal">Portugal</option>
								<option value="South Africa">South Africa</option>
								<option value="Italy">Italy</option>
								<option value="Switzerland">Switzerland</option>
							</select>
							<i></i>
						</label>
					</div>
					<!-- end country -->

					<!-- start city post code -->
					<div class="first-line">
						<div class="span8 main-row">
							<div class="input">
								
								<input type="text" id="city" placeholder="City" name="city">
							</div>
						</div>
						
					</div>
					<!-- end city post code -->

					<!-- start address -->
					<div class="main-row">
						<div class="input">
							
							<input type="text" id="address" placeholder="Address" name="address">
						</div>
					</div>
					<!-- end address -->

					<!-- start position -->
					<div class="main-row">
						<label class="input select">
							<select name="position" id="position">
								<option value="none" selected disabled="">Choose desired position</option>
								<option value="Tech Lead"> Tech Lead</option>
								<option value="Product Manager"> Product Manager</option>
								<option value="Developer"> Developer</option>
								<option value="Designer">Designer</option>
							</select>
							<i></i>
						</label>
					</div>
					<!-- end position -->

					<!-- start files -->
					
						<div class=" main-row">
							<label class="input append-small-btn">
								<div class="upload-btn">
									Browse
									<input
										id="files" 
										type="file" 
										name="file1" 
										onchange="document.getElementById('file1_input').value = this.value;">
								</div>
								<input type="text" id="file1_input" readonly="" placeholder="Add your CV">
								<span class="hint">Only: pdf / doc Size: lessthan 1 Mb</span>
							</label>
						</div>
						
					
					<!-- end files -->

			
				<!-- end /.content -->

				<div class="footer">
					<button type="submit" class="primary-btn">Send</button>
					<button type="reset" class="secondary-btn">Reset</button>
				</div>
				<!-- end /.footer -->

			</form>
		</div>
		<p class="copy_rights">&copy; 2016 Stamplay. All Rights Reserved | Design by  <a href="http://w3layouts.com/"> W3layouts</a></p>
</div>
		<!-- Scripts -->
		<script src="js/jquery.1.11.1.min.js"></script>
		<!--SDK -->
    	<script src="https://drrjhlchpvi7e.cloudfront.net/libs/stamplay-js-sdk/2.0.7/stamplay.min.js"></script>
    	<script>
      		Stamplay.init('job-application');
    	</script>


		<script>
		$(document).ready(function(){

			var uploadform = document.getElementById("upload-form");
			uploadform.addEventListener("submit", function(e) {
				e.preventDefault();	

				var select_country = document.getElementById("country");
				var country = select_country.options[select_country.selectedIndex].value;

				var select_position = document.getElementById("position");
				var position = select_position.options[select_position.selectedIndex].value;

				var form_data = 
				{
					first_name: $("#first_name").val(),
					last_name: $("#last_name").val(),
					email: $("#email").val(),
					phone: $("#phone").val(),
					country: country,
					city: $("#city").val(),
					address: $("#address").val(),
					desired_position: position
				};

				Stamplay.Object('application_info').save(form_data).then(function(res){
					console.log(res);
					var id = res._id;

						var files = document.getElementById("files").files;
  						var data = new FormData();
  						data.append("cv", files[0]);
						var xhr = new XMLHttpRequest();
  						xhr.open('PATCH', 'https://job-application.stamplayapp.com/api/cobject/v1/application_info/'+ id, true);
  						xhr.onload = function(e) {
    						if(xhr.status >= 200 && xhr.status < 400) {
      							console.log(JSON.parse(xhr.response));
    						} else {
      							console.error(xhr.status + " (" + xhr.statusText + ")" + ": " + xhr.responseText);
    						}
						};
					xhr.send(data);  
					});
				});
			});
		</script>
</body>
</html>
